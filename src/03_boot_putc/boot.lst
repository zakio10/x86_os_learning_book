     1                                          BOOT_LOAD       equ     0x7C00                  ;ブートプログラムのロード位置
     2                                  
     3                                          ORG             BOOT_LOAD                       ;ブートアドレスをアセンブラに指示
     4                                  
     5                                  ;********************************************************************************************************
     6                                  ;エントリポイント
     7                                  ;********************************************************************************************************
     8                                  
     9                                  
    10                                  entry:
    11 00000000 EB58                            jmp ipl                                    ;IPL(Initial Program Loader)(ブートプログラム)へジャンプ
    12                                  
    13                                          ;-----------------------------------
    14                                          ;BPB(BIOS Parameter Block)
    15                                          ;-----------------------------------
    16 00000002 90<rept>                        times   90 - ($ - $$) db 0x90
    17                                  
    18                                          ;-----------------------------------
    19                                          ;IPL(Initial Program Loader)
    20                                          ;-----------------------------------
    21                                  ipl:
    22 0000005A FA                              cli                                             ;//割り込み禁止(IF = 1)
    23                                  
    24 0000005B B80000                          mov     ax, 0x0000                              ;AX = 0x0000;
    25 0000005E 8ED8                            mov     ds, ax                                  ;DS = 0x0000;
    26 00000060 8EC0                            mov     es, ax                                  ;ES = 0x0000;
    27 00000062 8ED0                            mov     ss, ax                                  ;SS = 0x0000;
    28 00000064 BC007C                          mov     sp, BOOT_LOAD                           ;SP = 0x0000;
    29                                  
    30 00000067 FB                              sti                                             ;//割り込み許可(IF = 0)
    31                                  
    32 00000068 8816[7800]                      mov     [BOOT.DRIVE], dl                        ;ブートドライブを保存
    33                                  
    34 0000006C B041                            mov     al, 'A'
    35 0000006E B40E                            mov     ah, 0x0E
    36 00000070 BB0100                          mov     bx, 0x0001
    37 00000073 CD10                            int     0x10
    38                                  
    39                                  
    40                                          ;-----------------------------------
    41                                          ;処理の終了
    42                                          ;-----------------------------------
    43 00000075 EBFE                            jmp     $                               ;while(1); //無限ループ
    44                                  
    45 00000077 00                      ALIGN   2, db 0
    46                                  BOOT:                                           ;ブートドライブに関する情報
    47 00000078 0000                    .DRIVE:    dw 0                                 ;ドライブ番号
    48                                  
    49                                  ;********************************************************************************************************
    50                                  ;ブートフラグ(先頭512バイトの終了)
    51                                  ;********************************************************************************************************
    52 0000007A 00<rept>                        times   510 - ($ - $$) db 0x00
    53 000001FE 55AA                            db 0x55, 0xAA
